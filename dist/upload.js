!function(e){function t(t){for(var i,o,s=t[0],l=t[1],u=t[2],c=0,d=[];c<s.length;c++)o=s[c],r[o]&&d.push(r[o][0]),r[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(f&&f(t);d.length;)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={3:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/wboo/dist/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var f=l;a.push([73,0]),n()}({18:function(e,t,n){"use strict";(function(e){var i=n(30),r=n.n(i),a=1,o={image:"jpg,png,jpeg,gif",excel:"xlsx,xls"},s={image:"图片",excel:"Excel"},l=void 0!==window.FileReader,u=function(e){return"请选择["+function(e){return e=e?e.toLowerCase():"",s[e]||e}(e)+"]类型的文件"},f=function(e,t,n){var i={ok:!0};if(!t)return i;if(e.files&&0===e.files.length)return i;e.files&&e.files[0];return function(e,t){var n={ok:!1,errmsg:u(e)};if(-1===t.indexOf("."))return n;var i=t.split(".").pop();return i&&(o[e]||"").toLowerCase().split(",").indexOf(i)>=0?{ok:!0}:n}(t,n)},c={removeFileInput:function(){var t=e(this.$refs.form).children(".v-file");t.length&&t.remove()},makeFileInput:function(){var t=this,n=e('<input type="file" class="v-file" />');n.css("display","none"),n.attr("id",this.elemId),n.attr("name",this.myElemName),n.on("change",function(e){t.change(e)}),e(this.$refs.form).append(n)},getFileInputElem:function(){return e(this.$refs.form).children(".v-file")[0]},reset:function(){this.fileValue="",this.filePath="",this.errmsg="",this.removeFileInput(),this.makeFileInput()},checkType:function(e){if(!(e=e||this.getFileInputElem()))return!0;var t=f(e,this.filetype,this.file);return!!t.ok||t.errmsg},change:function(e){var t=e.target||e.currentTarget,n=t.value;this.filePath=n;var i=this.checkType(t);return!0!==i?(this.fileValue="",this.errmsg=i,!1):!!n&&(this.fileValue=n,void(this.checkNull()&&(this.errmsg="",this.sendOnSelect&&this.send())))},preview:function(e){var t=this;if(!e)return!1;var n=e[0];if(!n)return!1;if(!l)return!1;var i=new window.FileReader;i.onload=function(){t.$emit("preview",i.result)},i.readAsDataURL(n)},checkNull:function(){return!!this.fileValue||"请上传文件"},check:function(){if(this.silent)return!0;var e=this.checkType();return!0!==e?(this.errmsg=e,!1):!0!==(e=this.checkNull())?(this.errmsg=e,!1):(this.errmsg="",!0)},checkAndSend:function(){if(this.loading)return!1;if(!this.filePath)return this.errmsg="请选择文件",!1;var e=this.checkType();return!0!==e?(this.errmsg=e,!1):this.send()},send:function(){var e=this;this.loading=!0,r()(this.$refs.form,{success:function(t){e.loading=!1,e.$emit("success",t),t.success&&e.$emit("input",t.data)},error:function(){e.loading=!1,e.fileValue="",e.errmsg="上传失败"}}).send()}},d={elemId:function(){return"v_file_upload_"+this.id},myText:function(){return this.loading?"上传中..":this.labelText||"选择文件"},myElemName:function(){return this.elemName||"file"},file:function(){return this.filePath?this.filePath.split("\\").pop().split("/").pop():""},formAction:function(){return this.action},errmsgVisible:function(){return!!this.errmsg},openFileVisible:function(){return!this.errmsgVisible&&!!this.value},selectBtnVisible:function(){return!this.sendBtnVisible},sendBtnVisible:function(){return!this.loading&&!!this.filePath}};t.a={data:function(){return{id:a++,fileValue:"",filePath:"",errmsg:"",loading:!1}},methods:c,computed:d,props:["labelText","elemName","filetype","silent","action","sendOnSelect","value"],mounted:function(){this.makeFileInput()},beforeDestroy:function(){}}}).call(this,n(6))},19:function(e,t,n){var i=n(75);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n(2).default)("b2b9fb66",i,!1,{})},20:function(e,t,n){var i=n(77);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n(2).default)("0af4d7b6",i,!1,{})},30:function(e,t,n){var i=n(6),r=i.noop,a=1,o={dataType:"json"};function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$form=e,this.options=i.extend(!0,{},o,t)}var l=s.prototype;l.init=function(){this.$form.attr({enctype:"multipart/form-data"})},l.send=function(){this.makeIframe(),this.$form.submit(),this.startFetch()},l.handleContent=function(e,t){if(!e)return this.handleError(t);var n=this.options.success||r,i=this.options.error||r;"json"===this.options.dataType?e&&t?n(t):i(t):e?n(e):i(t)},l.handleError=function(e){(this.options.error||r)(e)},l.makeIframe=function(){this.removeIframe();var e="form-async-prefix-"+a++;this.$iframe=i('<iframe name="'+e+'" src="about:blank" style="display: none;"></iframe>'),this.$iframe.insertAfter(this.$form),this.$form.attr("target",e)},l.removeIframe=function(){this.$iframe&&(this.$iframe.remove(),this.$iframe=null)},l.startFetch=function(){var e=this;!function e(t,n){if(!t)return null;if((n=n||function(){}).is_iframe_fetch_callback)var i=n;else(i=function(e){if(!i.called){if(i.called=!0,t.onload=null,e instanceof Error)return n("",e);try{var r=JSON.parse(e)}catch(e){r=null}return n(e,r)}}).is_iframe_fetch_callback=!0;var r=function(){return e.call(null,t,i)},a=function(){try{var e=t.contentWindow.document;return!!e&&"uninitialized"!==e.readyState&&"loading"!==e.readyState&&null!==e.body&&(e.body.textContent||e.body.innerText)}catch(e){return e}};t.onload=function(){i(a())};var o=a();return o?i(o):setTimeout(r,100)}(this.$iframe[0],function(t,n){e.handleContent(t,n),e.removeIframe()})},l.isPending=function(){return!!this.$iframe},e.exports=function(e,t){var n=void 0;return(n=e.jquery?new s(e,t):new s(i(e),t)).init(),n}},31:function(e,t,n){"use strict";var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"test-upload"},[t("h4",[this._v("上传测试")]),this._v(" "),t("div",[t("file-upload",{attrs:{action:"http://localhost/upload"}})],1),this._v(" "),t("div",{staticClass:"mt10"},[t("file-upload",{attrs:{action:"http://localhost/never"}})],1)])};i._withStripped=!0;var r={data:function(){return{}},created:function(){},methods:{},computed:{},watch:{},props:[],mounted:function(){},mixins:[],beforeDestroy:function(){},components:{"file-upload":n(83).default}},a=(n(76),n(0)),o=Object(a.a)(r,i,[],!1,null,"da3348d8",null);o.options.__file="js/pages/upload.vue";t.a=o.exports},4:function(e,t){e.exports=dll},73:function(e,t,n){"use strict";n.r(t),function(e){new e({el:"#main",components:{"v-main":n(31).a}})}.call(this,n(3))},74:function(e,t,n){"use strict";var i=n(19);n.n(i).a},75:function(e,t,n){(e.exports=n(1)(!1)).push([e.i,".v-file-upload[data-v-312db596] {\n  display: table;\n  table-layout: fixed;\n}\n.v-file-upload > label[data-v-312db596] {\n  display: table-cell;\n  vertical-align: middle;\n  height: 32px;\n  line-height: 32px;\n}\n.v-file-upload > em[data-v-312db596] {\n  display: table-cell;\n  width: 8px;\n}\n.v-file-upload .error-msg[data-v-312db596] {\n  color: #ee0000;\n  line-height: 32px;\n}\n.v-file-name[data-v-312db596] {\n  min-width: 200px;\n  padding-right: 10px;\n}\n.v-file-name > div[data-v-312db596] {\n  height: 32px;\n  padding-left: 8px;\n  padding-right: 8px;\n  overflow: hidden;\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  display: block;\n}\n.v-file-name > div[data-v-312db596],\n.v-file-label[data-v-312db596],\n.send-btn[data-v-312db596] {\n  border: 1px solid #eee;\n  background-color: #eee;\n  color: #333;\n  cursor: pointer;\n  white-space: nowrap;\n  -webkit-border-radius: 3px;\n  -moz-border-radius: 3px;\n  border-radius: 3px;\n}\n.v-file-label[data-v-312db596],\n.send-btn[data-v-312db596] {\n  border: 1px solid #eee;\n  width: 90px;\n  text-align: center;\n  background-color: #aaa;\n  color: #fff;\n}\n.send-btn[data-v-312db596] {\n  height: 32px;\n  background-color: #5faee3;\n  border-color: #49a3df;\n}\n.open-file[data-v-312db596] {\n  margin-left: 12px;\n  line-height: 32px;\n}\n",""])},76:function(e,t,n){"use strict";var i=n(20);n.n(i).a},77:function(e,t,n){(e.exports=n(1)(!1)).push([e.i,".test-upload[data-v-da3348d8] {\n  padding-left: 15px;\n}\n",""])},83:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"v-file-upload"},[n("label",{staticClass:"v-file-name",attrs:{for:e.elemId}},[n("div",{attrs:{title:e.file},domProps:{textContent:e._s(e.file)}})]),e._v(" "),n("label",{directives:[{name:"show",rawName:"v-show",value:e.selectBtnVisible,expression:"selectBtnVisible"}],staticClass:"v-file-label ml10",attrs:{title:"选择要上传的文件",for:e.elemId},domProps:{textContent:e._s(e.myText)}}),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:e.sendBtnVisible,expression:"sendBtnVisible"}],staticClass:"send-btn",on:{click:e.checkAndSend}},[e._v("上传")]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.errmsgVisible,expression:"errmsgVisible"}],staticClass:"error-msg ml10",domProps:{textContent:e._s(e.errmsg)}}),e._v(" "),n("a",{directives:[{name:"show",rawName:"v-show",value:e.openFileVisible,expression:"openFileVisible"}],staticClass:"open-file",attrs:{href:e.value,target:"_blank","click-jump":""}},[e._v("查看文件")]),e._v(" "),n("form",{ref:"form",staticStyle:{display:"none"},attrs:{action:e.formAction}},[e._t("default")],2)])};i._withStripped=!0;var r=n(18).a,a=(n(74),n(0)),o=Object(a.a)(r,i,[],!1,null,"312db596",null);o.options.__file="js/comp/common/file-upload.vue";t.default=o.exports}});