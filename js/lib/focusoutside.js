!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.FocusOutside={})}(this,function(e){"use strict";function t(e){return o.find(function(t){return t.contains(e)||t===e})}function n(e){var n=t(e.target);if(n){var i=r(s.entries(),n)||{},u=i.nodeList;i.el&&clearTimeout(u.timerId)}}function i(e){var n=t(e.target);if(n){var i=r(s.entries(),n)||{},u=i.key;i.el&&(i.nodeList.timerId=setTimeout(u,10))}}function r(e,t){for(var n=0;n<e.length;n++){var i=u(e[n],2),r=i[0],o=i[1],s=o.find(function(e){return e.node===t});if(s)return{key:r,nodeList:o,el:s}}}var u=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,u=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,u=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw u}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=[],s=new function(){function e(e){for(var n=0;n<t.length;n++)if(t[n][0]===e)return{index:n,value:t[n][1],key:e}}var t=[];return{get:function(t){var n=e(t);return n&&n.value},set:function(n,i){var r=e(n);return r?t[r.index][1]=i:(t.push([n,i]),this.size++),this},has:function(t){return!!e(t)},size:0,clear:function(){t=[],this.size=0},values:function(){return t.map(function(e){return e[1]})},entries:function(){return t},delete:function(n){var i=e(n);return!!i&&(t.splice(i.index,1),this.size--,!0)}}},a="focus-outside";e.bind=function(e,t,r){r&&(a=r),o.indexOf(e)<0&&o.push(e),s.has(t)?s.get(t).push({node:e,oldTabIndex:e.getAttribute("tabindex")}):s.set(t,[{node:e,oldTabIndex:e.getAttribute("tabindex")}]);(function(e){return isNaN(parseInt(e.getAttribute("tabindex")))})(e)&&function(e){e.setAttribute("tabindex",-1)}(e),function(e,t){var n=e.className.split(" ");n.indexOf(t)>-1||(n.push(t),e.className=n.join(" "))}(e,a),e.addEventListener("focusin",n),e.addEventListener("focusout",i)},e.unbind=function(e){var t=r(s.entries(),e)||{},u=t.el,f=t.key,d=t.nodeList;if(u){var c=u.node,l=u.oldTabIndex,v=o.indexOf(c);v>-1&&o.splice(v),function(e,t){var n=e.className.split(" "),i=n.indexOf(t);i<0||(n.splice(i,1),e.className=n.join(" "))}(c,a),l?c.setAttribute("tabindex",l):c.removeAttribute("tabindex"),c.removeEventListener("focusin",n),c.removeEventListener("focusout",i);var b=d.indexOf(u);v>-1&&d.splice(b,1),d.length||s.delete(f)}},Object.defineProperty(e,"__esModule",{value:!0})});
